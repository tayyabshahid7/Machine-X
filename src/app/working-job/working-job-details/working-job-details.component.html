<div class="container-64">

    <div class="site-page-header-ghost-wrapper bottom-border">
        <nz-page-header nzBackIcon [nzGhost]="false">
          <nz-page-header-title><span class="previous">Working Jobs / </span> #00133312 Details  </nz-page-header-title>
          <nz-page-header-extra>
            <nz-tag  nzColor="success" *ngIf="status == 'InProgress'"  class="nz-tag-me">InProgress </nz-tag>
            <nz-tag  [nzColor]="'purple'" *ngIf="status == 'Shipped'" class="nz-tag-me">Shipped</nz-tag>
            <nz-tag [nzColor]="'red'" *ngIf="status == 'Issue'" class="nz-tag-me">Issue </nz-tag>
    
    
          </nz-page-header-extra>
        </nz-page-header>
      </div>
    
      <div class="content row">

        <div *ngIf="history"  class="col-md-6 border-right">
          <div class="col-md-12 p-24 white-bg scrollable">
            <nz-timeline>
                <nz-timeline-item  [nzDot]="cloud">
                   <h5><b class="gray-9">Initial Revision</b></h5> 
                    <p class="gray-8">09.20.2020</p>
                    <p class="gray-7">
                        Lorem Ipsum is simply dummy text of the 
                        printing and typesetting industry. Lorem Ipsum has been the industry's standard.
                    </p>
                    
                
                </nz-timeline-item>
                <nz-timeline-item [nzDot]="cloud">
                   <h5><b class="gray-9">Invoice generated</b></h5> 
                   <p class="gray-8">29.9.2020</p>
                   <p class="gray-7">
                    Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
                    Lorem Ipsum has been the industry's standard dummy text ever since the 1500s
                   </p>
                </nz-timeline-item>
                <nz-timeline-item [nzDot]="cloud" nzColor="gray">
                  <h5><b class="gray-8">RFQ Name Created</b></h5>
                  <p class="gray-8">01.03.2020</p>
              </nz-timeline-item>
              <nz-timeline-item [nzDot]="cloud" nzColor="gray">
                  <h5><b class="gray-8">Engineer submitted revision A for quoting</b></h5>
                  <p class="gray-8">03.03.2020</p>
                  <p class="gray-7">
                      Lorem Ipsum is simply dummy text of the printing 
                      and typesetting industry. Lorem Ipsum has been the industry's standard.
                  </p>
                  <nz-timeline>
                      <nz-timeline-item>
                          <h5><b class="red-6"> Issue ID #231311</b></h5>
                          <p class="gray-7">07.03.2020</p>
                      </nz-timeline-item>
                  </nz-timeline>
              </nz-timeline-item>
              </nz-timeline>

              <ng-template #cloud>
                <i nz-icon nzType="cloud-download" nzTheme="outline"></i>
              </ng-template>
        </div>
        </div>

        <nz-tabset *ngIf=" ! history" class="col-md-6 border-right" >
      
            <nz-tab nzTitle="RFQ Details" >
                <div class="firts-tab-content">
    
                    <div class="col-md-12 pt-30px scrollable">
              
                        <div class="row">
                            <div class="col-md-6">
                                <div class="summary">
                                    <h6><b class="mb-2">RFQ SUMMARY</b></h6>
                                    <p>
                                      Shop handling part: <b>Metal Shop X</b> 
                                    </p><br>
                                    <p>
                                      Selected part <b>ASD-491-231</b> 
                                    </p>
                                    <p>
                                      Part revision: <b>Revision C</b> 
                                    </p>
                                    <p>
                                      Material selected: <b>Aluminium</b> 
                                    </p>
                                    <p>
                                      Quantity: <b>12</b> 
                                    </p>
                                    <p>
                                      Part revision: <b>Revision C</b> 
                                    </p>
                                    <p>
                                      Selected part <b>ASD-491-231</b> 
                                    </p>
                                    <p>
                                      Part needed by: <b>29.10.2020 C</b> 
                                    </p>
                                  </div>
                            </div>
            
                            <div class="col-md-6">
                              <h6><b class="mb-1">PREVIEW</b></h6>
                              <div class="preview">
                      
                              </div>
                      
                            </div>
                        </div>
                        <div class="mt-30px">
                            
                          <div class="mt-4 row">
                                  <div class="col-md-12">
                                      <h6><b class="mb-2">NOTES</b></h6>
                                      <p class="gray-8">
                                          Continually fashion strategic metrics through interdependent partnerships. Dramatically disseminate enterprise-wide initiatives vis-a-vis distributed alignments. Phosfluorescently 
                                          leverage existing revolutionary alignments rather than client-centric process improvements.
                                          <br><br> 
                                          Continually fashion strategic metrics through interdependent partnerships. Dramatically disseminate enterprise-wide initiatives vis-a-vis distributed alignments. Phosfluorescently 
                                          leverage existing revolutionary alignments rather than client-centric process improvements.          
                                     </p>
                                  </div>
          
                              </div>
                              <div class="mt-4 row">
                                  <div class="col-md-12">
                                      <h6><b class="mb-2">ATTACHED FILES</b></h6>
                                  </div>
                                  <div class="col-md-12"> 
                                    <i class="file-clip" nz-icon nzType="paper-clip" nzTheme="outline"></i> <a class="blue file">FSJ-322-901_Rvision-C.PDF</a>
                                  </div>
                              </div>
                              <div class="mt-4 row">
                                  <div class="col-md-12">
                                      <h6><b class="mb-2 mt-2">SHIPPING ADDRESS</b></h6>
                                  </div>
                                  <div class="col-md-6 summary">
                      
                                    <p>
                                      Name: <b>John Davison Rockefeller Sr. </b> 
                                    </p>
                                    <p>
                                      Address: <b>Upstate New York</b> 
                                    </p>
                                    <p>
                                      City: <b>Utica</b> 
                                    </p>
                                    <p>
                                      Quantity: <b>12</b> 
                                    </p> 
                                    <p>
                                      Selected part <b>ASD-491-231</b> 
                                    </p>
                                    <p>
                                      Part revision: <b>Revision C</b> 
                                    </p>
                                   
                                    <p>
                                      Part needed by: <b>29.10.2020 C</b> 
                                    </p>
                                  </div>
                                  
                              </div>
                             
                        </div>
            
                 
        
        
                  </div>
                </div>
            </nz-tab>
             <nz-tab nzTitle="Quote Details">
              <div class="quote-details-tab">
                <div class="col-md-12 pt-30px scrollable">
                    <div class="row">
                      <div class="col-md-6">
                          <div class="summary">
                            <h6><b class="mb-2">MACHINE X</b></h6>
                              <p>
                              Shop Name:   <b> Quantum PHX</b>
                              </p>
                              <p>
                               Address: <b> R221, ST.Monica Pier  </b>
                              </p>
                              <p>
                               City: <b>San Jose</b>  
                              </p>
                              <p>
                                State: <b>  CA, 41211</b>
                              </p>
                              <p>
                                Shop Phone Number: <b> A+1(514)213331</b>
                              </p>
                            </div>
                      </div>
          
                      <div class="col-md-6">
                          <div class="summary">
                              <h6><b class="mb-1">QUOTE #2308</b></h6>
                              <p>
                                Date:  <b> Quantum PHX</b>
                              </p>
                              <p>
                                 Engineer Name: <b> R221, ST.Monica Pier</b>
                              </p>
                              <p>
                                 Part Name:  <b> Bike Door Handle 551-MXO-4JM</b>
                              </p>
                              <p>
                                Engineer Email:  <b> CA, 41211</b>
                              </p>
                              <p>
                                 Engineer Address Line 1:<b>San Diego, CA </b>
                              </p>
                            </div>
                      </div>
                  </div>
                  <div class="mt-30px">
                      <nz-table  [nzShowPagination]="false"  #basicTable [nzData]="tableData">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Item Name</th>
                              <th>Quantity</th>
                              <th>Unit Cost</th>
                              <th>Total</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let data of basicTable.data">
                              <td>{{ data.id }}</td>
                              <td>{{ data.name }}</td>
                              <td>{{ data.quantity }}</td>
                              <td>${{ data.cost }}</td>
                              <td>${{ data.cost * data.quantity }}</td>
                              
                            </tr>
                          </tbody>
                        </nz-table>
                        <div class="mt-2 row">
                            <div class="col-md-8">
                               <b>Note</b>
                                <p>
                                  It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum
                                </p>
                            </div>
                            <div class="col-md-3">
                                <p class=" tax text-center">+ Tax $15.00</p>
                                <nz-table [nzShowPagination]="false"  #basicTable [nzData]="tableData">
                                  <thead>
                                    <tr>
                                      <th>Grand Total</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr >
                                      <td class="blue">$1,360.00</td>
                                    </tr>
                                  </tbody>
                                </nz-table>
                            </div>
                        </div>
                        <div>
                            <span class="blue">*</span>Attached files
                        </div>
                        <div>
                          <i class="file-clip" nz-icon nzType="paper-clip" nzTheme="outline"></i> <a class="blue file">FSJ-322-901_Rvision-C.PDF</a>
                        </div>
                  </div>
          
                  </div>
              </div>
            </nz-tab>
            <nz-tab nzTitle="Job Details">
              <div class="firts-tab-content">
  
                  <div class="col-md-12 pt-30px scrollable">
            
                      <div class="row">
                          <div class="col-md-6">
                              <div class="summary">
                                  <h6><b class="mb-2">JOB SUMMARY</b></h6>
                                  <p>
                                    Shop handling part: <b>Metal Shop X</b> 
                                  </p><br>
                                  <p>
                                    Selected part <b>ASD-491-231</b> 
                                  </p>
                                  <p>
                                    Part revision: <b>Revision C</b> 
                                  </p>
                                  <p>
                                    Material selected: <b>Aluminium</b> 
                                  </p>
                                  <p>
                                    Quantity: <b>12</b> 
                                  </p>
                                  <p>
                                    Part revision: <b>Revision C</b> 
                                  </p>
                                  <p>
                                    Selected part <b>ASD-491-231</b> 
                                  </p>
                                  <p>
                                    Part needed by: <b>29.10.2020 C</b> 
                                  </p>
                                </div>
                          </div>
          
                          <div class="col-md-6">
                            <h6><b class="mb-1">PREVIEW</b></h6>
                            <div class="preview">
                    
                            </div>
                    
                          </div>
                      </div>
                      <div class="mt-30px">
                          
                        <div class="mt-4 row">
                                <div class="col-md-12">
                                    <h6><b class="mb-2">NOTES</b></h6>
                                    <p class="gray-8">
                                        Continually fashion strategic metrics through interdependent partnerships. Dramatically disseminate enterprise-wide initiatives vis-a-vis distributed alignments. Phosfluorescently 
                                        leverage existing revolutionary alignments rather than client-centric process improvements.
                                        <br><br> 
                                        Continually fashion strategic metrics through interdependent partnerships. Dramatically disseminate enterprise-wide initiatives vis-a-vis distributed alignments. Phosfluorescently 
                                        leverage existing revolutionary alignments rather than client-centric process improvements.          
                                   </p>
                                </div>
        
                            </div>
                            <div class="mt-4 row">
                                <div class="col-md-12">
                                    <h6><b class="mb-2">ATTACHED FILES</b></h6>
                                </div>
                                <div class="col-md-12"> 
                                  <i class="file-clip" nz-icon nzType="paper-clip" nzTheme="outline"></i> <a class="blue file">FSJ-322-901_Rvision-C.PDF</a>
                                </div>
                            </div>
                            <div class="mt-4 row">
                                <div class="col-md-12">
                                    <h6><b class="mb-2 mt-2">SHIPPING ADDRESS</b></h6>
                                </div>
                                <div class="col-md-6 summary">
                    
                                  <p>
                                    Name: <b>John Davison Rockefeller Sr. </b> 
                                  </p>
                                  <p>
                                    Address: <b>Upstate New York</b> 
                                  </p>
                                  <p>
                                    City: <b>Utica</b> 
                                  </p>
                                  <p>
                                    Quantity: <b>12</b> 
                                  </p> 
                                  <p>
                                    Selected part <b>ASD-491-231</b> 
                                  </p>
                                  <p>
                                    Part revision: <b>Revision C</b> 
                                  </p>
                                 
                                  <p>
                                    Part needed by: <b>29.10.2020 C</b> 
                                  </p>
                                </div>
                                
                            </div>
                           
                      </div>
          
               
      
      
                </div>
              </div>
          </nz-tab>
          </nz-tabset>
    
    
          <nz-tabset class="col-md-6">
           
            <nz-tab [nzTitle]="titleTemplate">
                <ng-template #titleTemplate>
                    <i nz-icon nzType="message" nzTheme="outline"></i>
                    Chat
                  </ng-template>
                  <div   class=" chat-tap col-md-12 white-bg">
                    <nz-list class="messages" *ngIf="data.length" [nzDataSource]="data" 
                    [nzRenderItem]="item" [nzItemLayout]="'horizontal'">
                        <ng-template #item let-item>
                            
                          <nz-comment [nzAuthor]="item.author" [nzDatetime]="item.displayTime">
                            <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="item.avatar"></nz-avatar>
                            <nz-comment-content class="bubble bubble-bottom-left">
                                <b class="red">{{item.title}}</b>
                              <p>{{ item.content }}</p>
                            </nz-comment-content>
                          </nz-comment>
                        </ng-template>
                      </nz-list>
                      <div class="messages no-message-container" *ngIf="!data.length">
                        <!-- <img *ngIf="status=='shipped'" src="../../../../../assets/img/chatIcon-red.svg" > -->
                          <img  src="../../../assets/img/chatIcon-blue.svg">
                          <p  class="blue no-message-p">
                            Engage with the Machine Shop handling 
                            this part by sending them a message or 
                            aising an issue if something uncontrolled comes up. 
                          </p>
    
                          <!-- <p *ngIf="status=='shipped'" class="red no-message-p">
                            You are about to raise an issue with the Machine Shop handling this part. 
                          </p> -->
        
                      </div>
                      <nz-comment class="chat-box">
                        <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="user.avatar"></nz-avatar>
                        <nz-comment-content >
                          <nz-form-item>
                            <input *ngIf="issue" nz-input class="mb-2" placeholder="Title" [(ngModel)]="titleValue" />
    
                            <textarea [(ngModel)]="inputValue" nz-input rows="4"></textarea>
                          </nz-form-item>
                          <nz-form-item class="send space-between">
                            <button *ngIf="!issue" (click)="startIssue()" nz-button nzType="primary" nzDanger>Report Issue <i nz-icon nzType="exclamation-circle" nzTheme="outline"></i></button>
                            <button *ngIf="issue" (click)="cancelIssue()" nz-button nzType="default" nzDanger class="gray-9">Cancel </button>
    
                           <div class="push-r">
                            <i class="attach pr-3" nz-icon nzType="paper-clip" nzTheme="outline"></i>
                            <button nz-button nzType="primary" [nzLoading]="submitting" [disabled]="!inputValue" (click)="handleSubmit()">
                              Add Comment
                            </button>
                        </div>
                          </nz-form-item>
                        </nz-comment-content>
                      </nz-comment>
                </div>
            </nz-tab>
          </nz-tabset>
      </div>
      <nz-footer *ngIf="history">
        <button (click)="hideHistory()" nz-button class="mar-2" nzType="default">Back</button>

      </nz-footer>
      <nz-footer  *ngIf="!history">
        <div>
          <button (click)="startJob()"  nz-button class="mar-2" nzType="primary">Open Invoice</button>
          <button  data-toggle="modal" data-target="#ShareModal"   nz-button class="mar-2" nzType="default">Share<i nz-icon nzType="share-alt" nzTheme="outline"></i></button>

        </div>
    
        
        <div class="push-r">
          <button (click)="showHistory()"  nz-button class="mar-2" nzType="default">History<i nz-icon nzType="history" nzTheme="outline"></i></button>

        <button (click)="showModal()" nz-button class="mar-2 purple-btn" [disabled]="canStart"  >Ship Part <i nz-icon nzType="export" nzTheme="outline"></i></button>
        </div>
    
    </nz-footer>
    </div>




    <nz-modal [(nzVisible)]="isVisible"  
     nzTitle="Shipping Details">
      <div class="row mt-1">
        <p class="col-12"> <span class="blue">*</span>Shipping Date</p><br>
      <div class="col-12">        
       <nz-date-picker class="col-12" [(ngModel)]="date" [nzFormat]="dateFormat">
       </nz-date-picker>
     </div>   
     </div>
     <div class="row mt-1">
       <p class="col-12"> <span class="blue">*</span>Shipping company</p><br>
     <div class="col-12"> 
      <nz-select class="col-12" nzAllowClear  placeholder="Select Country">
        <nz-option nzValue="1" nzLabel="USA"></nz-option>
        <nz-option nzValue="1" nzLabel="Canada"></nz-option>
      </nz-select>
   </div>   
    </div>
    
     <div class="row mt-3">
       <p class="col-12"><span class="blue">*</span>Tracking Number</p><br>
       <div class="col-12">
         <textarea rows="4" nz-input  placeholder="Description of this issue"></textarea>

       </div>
     </div>

     <ng-template [nzModalFooter]>
      <button nz-button nzType="default" (click)="handleCancel()">Cancel</button>
      <button nz-button nzType="primary" (click)="handleOk()" >Submit</button>
    </ng-template>
    </nz-modal>

    <div class="modal fade" id="ShareModal" tabindex="-1" role="dialog" aria-labelledby="ShareModal" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <b> <img src="../../../assets/img/share.svg" style="margin-right:10px"> Share with others</b>
            <div class="modal-content-custom-email">
            <div class="row mt-1">
               <p class="col-12"> <span class="blue">*</span>Email</p><br>
             <div class="col-10"><input nz-input placeholder="email@domain.com"/></div>   
             <div class="col-2">
               <img (click)="addEmail()" src="../../../assets/img/plus-circle.svg">
             </div>    
            </div>
            <div class="row mt-2" *ngFor="let email of receivers">
              <div class="col-10"><input nz-input placeholder="email@domain.com"/></div>   
              <div class="col-2">
                <img (click)="removeEmail()" src="../../../assets/img/delete.svg">
              </div> 
             </div>
            <div class="row mt-3">
              <p class="col-12">Add a note</p><br>
              <div class="col-12">
                <textarea rows="4" nz-input  ></textarea>
    
              </div>
            </div>
            <div class="mt-2 push-r">
              <button nz-button class="mar-2" nzType="default" data-dismiss="modal">Close</button>
              <button nz-button nzType="primary" type="button" data-dismiss="modal">Share</button>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    


    
    <div class="modal fade" id="ShipModal" tabindex="-1" role="dialog" aria-labelledby="ShipModal" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <b> <img src="../../../assets/img/exportion.svg" style="margin-right:10px">  Shipping Details</b>
            <div class="modal-content-custom-email">
            <div class="row mt-1">
               <p class="col-12"> <span class="blue">*</span>Shipping Date</p><br>
             <div class="col-12">        
              <nz-date-picker class="col-12" [(ngModel)]="date" [nzFormat]="dateFormat">
              </nz-date-picker>
            </div>   
            </div>
            <div class="row mt-1">
              <p class="col-12"> <span class="blue">*</span>Shipping company</p><br>
            <div class="col-12"> 
              <select id="cars" nz-input>
                <option value="volvo">Volvo</option>
                <option value="saab">Saab</option>
                <option value="opel">Opel</option>
                <option value="audi">Audi</option>
              </select>
          </div>   
           </div>
           
            <div class="row mt-3">
              <p class="col-12"><span class="blue">*</span>Tracking Number</p><br>
              <div class="col-12">
                <textarea rows="4" nz-input  placeholder="Description of this issue"></textarea>
    
              </div>
            </div>
            <div class="mt-2 push-r">
              <button nz-button class="mar-2" nzType="default" data-dismiss="modal">Close</button>
              <button nz-button nzType="primary" type="button" data-dismiss="modal">Share</button>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    